<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Data Access Workflow — Stripe</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
/* Stripe Design System */
* { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --stripe-purple: #635bff;
  --stripe-purple-dark: #4940c7;
  --text: #0a2540;
  --text-secondary: #425466;
  --text-tertiary: #8898aa;
  --bg: #f6f9fc;
  --surface: #ffffff;
  --border: #e3e8ee;
  --green: #00d924;
  --amber: #ff9933;
  --red: #df1b41;
}

body {
  font-family: 'Inter', -apple-system, sans-serif;
  background: var(--bg);
  color: var(--text);
  line-height: 1.6;
  font-size: 15px;
}

.container {
  max-width: 760px;
  margin: 0 auto;
  padding: 0 32px;
}

/* Header */
header {
  background: var(--surface);
  border-bottom: 1px solid var(--border);
  padding: 24px 0;
}

h1 {
  font-size: 24px;
  font-weight: 600;
  letter-spacing: -0.02em;
  color: var(--text);
}

/* Request Card */
.request-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 24px;
  margin: 32px 0;
  box-shadow: 0 1px 3px rgba(50,50,93,0.04);
}

.input-label {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-secondary);
  margin-bottom: 8px;
  display: block;
}

.request-textarea {
  width: 100%;
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 12px 14px;
  font-family: 'Inter', sans-serif;
  font-size: 15px;
  line-height: 1.5;
  color: var(--text);
  resize: none;
  outline: none;
  transition: border-color 0.15s ease, box-shadow 0.15s ease;
}

.request-textarea:focus {
  border-color: var(--stripe-purple);
  box-shadow: 0 0 0 3px rgba(99, 91, 255, 0.08);
}

.btn {
  background: var(--stripe-purple);
  color: white;
  border: none;
  padding: 12px 24px;
  border-radius: 6px;
  font-family: 'Inter', sans-serif;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s ease;
  box-shadow: 0 1px 3px rgba(99, 91, 255, 0.12),
              0 1px 2px rgba(99, 91, 255, 0.24);
}

.btn:hover {
  background: var(--stripe-purple-dark);
  transform: translateY(-1px);
  box-shadow: 0 4px 8px rgba(99, 91, 255, 0.16),
              0 2px 4px rgba(99, 91, 255, 0.24);
}

/* Agent Cards */
.agent-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 8px;
  margin-bottom: 20px;
  box-shadow: 0 1px 3px rgba(50,50,93,0.04);
}

.agent-header {
  padding: 16px 20px;
  border-bottom: 1px solid var(--border);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.agent-title {
  font-size: 16px;
  font-weight: 600;
  color: var(--text);
}

.agent-badge {
  font-size: 12px;
  color: var(--text-tertiary);
  background: #f6f9fc;
  padding: 4px 10px;
  border-radius: 4px;
  font-weight: 500;
}

.agent-body {
  padding: 20px;
}

/* Data Grid */
.field {
  display: flex;
  padding: 10px 0;
  border-bottom: 1px solid #f6f9fc;
}

.field:last-child { border-bottom: none; }

.field-label {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-secondary);
  min-width: 140px;
}

.field-value {
  font-size: 14px;
  color: var(--text);
}

.field-value code {
  background: #f6f9fc;
  padding: 2px 6px;
  border-radius: 4px;
  font-family: 'SF Mono', Monaco, monospace;
  font-size: 13px;
}

/* Check Items */
.check {
  padding: 12px 0;
  border-bottom: 1px solid #f6f9fc;
}

.check:last-child { border-bottom: none; }

.check-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 6px;
}

.check-icon {
  font-size: 16px;
  line-height: 1;
}

.check-name {
  font-size: 14px;
  font-weight: 600;
  color: var(--text);
}

.check-req {
  font-size: 13px;
  color: var(--text-secondary);
  line-height: 1.5;
  margin-left: 24px;
}

/* Decision */
.decision-banner {
  margin-top: 20px;
  padding: 16px 20px;
  background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
  border: 1px solid var(--green);
  border-radius: 8px;
  font-weight: 600;
  color: #15803d;
  box-shadow: 0 1px 3px rgba(0, 217, 36, 0.08);
}

/* Receipt */
.receipt {
  margin: 40px 0;
  background: var(--surface);
  border: 2px solid #000;
  border-radius: 8px;
  font-family: 'SF Mono', 'Courier New', monospace;
  overflow: hidden;
}

.receipt-header {
  background: #000;
  color: white;
  padding: 20px;
  text-align: center;
}

.receipt-header h3 {
  font-size: 14px;
  font-weight: 700;
  letter-spacing: 3px;
  margin-bottom: 8px;
}

.receipt-meta {
  font-size: 11px;
  opacity: 0.7;
  line-height: 1.6;
}

.receipt-body {
  padding: 28px;
  font-size: 12px;
  line-height: 1.9;
  color: #000;
  white-space: pre-wrap;
}

.receipt-footer {
  border-top: 2px dashed #e3e8ee;
  padding: 20px;
  text-align: center;
  font-size: 11px;
  color: var(--text-tertiary);
  background: #f6f9fc;
}

.receipt-footer .path {
  margin-top: 8px;
  color: var(--text);
  font-size: 12px;
}
</style>
</head>
<body>

<header>
  <div class="container">
    <h1>Data Access</h1>
  </div>
</header>

<main class="container">
  
  <!-- Request -->
  <div class="request-card">
    <label class="input-label">Your request</label>
    <div style="font-size:13px;color:#8898aa;margin-bottom:12px;">analyst@visa.com</div>
    <textarea class="request-textarea" rows="3">I need read access to fraud_detection_models dataset to analyze Q1 false positive rates for my risk analysis project.</textarea>
    <div style="margin-top:16px;">
      <button class="btn">Run Workflow</button>
    </div>
  </div>

  <!-- Intake Agent -->
  <div class="agent-card">
    <div class="agent-header">
      <span class="agent-title">Intake Agent</span>
      <span class="agent-badge">Claude Sonnet · 340ms</span>
    </div>
    <div class="agent-body">
      <div class="field">
        <div class="field-label">Requester</div>
        <div class="field-value">analyst@visa.com</div>
      </div>
      <div class="field">
        <div class="field-label">Dataset</div>
        <div class="field-value"><code>fraud_detection_models</code></div>
      </div>
      <div class="field">
        <div class="field-label">Access Level</div>
        <div class="field-value">read</div>
      </div>
      <div class="field">
        <div class="field-label">Justification</div>
        <div class="field-value">Analyze Q1 false positive rates for risk analysis project</div>
      </div>
      <div class="field">
        <div class="field-label">Confidence</div>
        <div class="field-value">0.94</div>
      </div>
    </div>
  </div>

  <!-- ABAC Policy -->
  <div class="agent-card">
    <div class="agent-header">
      <span class="agent-title">ABAC Policy Engine</span>
      <span class="agent-badge">Python · 12ms</span>
    </div>
    <div class="agent-body">
      <div style="font-size:12px;color:#8898aa;margin-bottom:20px;font-style:italic;">
        Loaded from backend/config/users.json + datasets.json
      </div>

      <div class="check">
        <div class="check-header">
          <span class="check-icon" style="color:#00d924;">✓</span>
          <span class="check-name">Role Authorization</span>
        </div>
        <div class="check-req">
          Requirement: One of [Data Analyst, Senior Data Analyst, Data Scientist]<br>
          User: Senior Data Analyst
        </div>
      </div>

      <div class="check">
        <div class="check-header">
          <span class="check-icon" style="color:#00d924;">✓</span>
          <span class="check-name">Clearance Level</span>
        </div>
        <div class="check-req">
          Requirement: Minimum Level 2<br>
          User: Level 3 (verified)
        </div>
      </div>

      <div class="check">
        <div class="check-header">
          <span class="check-icon" style="color:#00d924;">✓</span>
          <span class="check-name">Access Level Restriction</span>
        </div>
        <div class="check-req">
          Requirement: READ requests auto-approve eligible<br>
          User: Requesting READ access
        </div>
      </div>

      <div class="check">
        <div class="check-header">
          <span class="check-icon" style="color:#00d924;">✓</span>
          <span class="check-name">PII Restriction</span>
        </div>
        <div class="check-req">
          Requirement: No PII in dataset<br>
          User: N/A
        </div>
      </div>

      <div class="check">
        <div class="check-header">
          <span class="check-icon" style="color:#00d924;">✓</span>
          <span class="check-name">Training Requirements</span>
        </div>
        <div class="check-req">
          Requirement: InfoSec_Annual_2026<br>
          User: Completed 2026-01-15
        </div>
      </div>

      <div class="check">
        <div class="check-header">
          <span class="check-icon" style="color:#00d924;">✓</span>
          <span class="check-name">Employment Type</span>
        </div>
        <div class="check-req">
          Requirement: FTE or approved contractor<br>
          User: FTE (verified via HR system)
        </div>
      </div>

      <div class="check">
        <div class="check-header">
          <span class="check-icon" style="color:#00d924;">✓</span>
          <span class="check-name">MNPI Blackout</span>
        </div>
        <div class="check-req">
          Requirement: Dataset not tagged MNPI<br>
          User: N/A - Dataset is Internal classification
        </div>
      </div>

      <div class="check">
        <div class="check-header">
          <span class="check-icon" style="color:#00d924;">✓</span>
          <span class="check-name">Time-Limited Access</span>
        </div>
        <div class="check-req">
          Requirement: All access expires in 90 days<br>
          User: Expiry will be set to 2026-05-17
        </div>
      </div>

      <div class="decision-banner">
        ✓ DECISION: APPROVED — All 8 ABAC checks passed
      </div>
    </div>
  </div>

  <!-- Receipt -->
  <div class="receipt">
    <div class="receipt-header">
      <h3>ACCESS DECISION RECEIPT</h3>
      <div class="receipt-meta">
        <div>Visa Global Data Office</div>
        <div>Data Access Request Workflow</div>
        <div>2026-02-16 15:30:00 UTC</div>
      </div>
    </div>
    
    <div class="receipt-body">DECISION: APPROVED

WHO: Sarah Chen | Senior Data Analyst | analyst@visa.com
WHAT: fraud_detection_models (READ access)
REASON: Analyze Q1 false positive rates for risk analysis project

WHY APPROVED:
  ✓ Role Authorization: Senior Data Analyst
  ✓ Clearance Level: Level 3 (verified)
  ✓ Access Level Restriction: Requesting READ access
  ✓ PII Restriction: N/A
  ✓ Training Requirements: Completed 2026-01-15
  ✓ Employment Type: FTE (verified via HR system)
  ✓ MNPI Blackout: N/A - Dataset is Internal
  ✓ Time-Limited Access: Expiry will be set to 2026-05-17

ACCESS GRANTED UNTIL: 2026-05-17

────────────────────────────────────────────────
Technical Log:
  15:30:00 | IntakeAgent extracted request (782 tokens)
  15:30:01 | ABAC checked 8 policies (8 passed)
  15:30:01 | Access token generated (visa-token-91847)
  15:30:02 | 4 notifications sent</div>

    <div class="receipt-footer">
      <div>This audit log will be saved to:</div>
      <div class="path">backend/receipts/REQ-91847_2026-02-16.txt</div>
    </div>
  </div>

</main>

</body>
</html>
